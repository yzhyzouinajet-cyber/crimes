<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>T√©l√©phone factice</title>
<style>
  body{
    font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;
    background:#eef4fb;
    margin:0; padding:20px;
    display:flex; justify-content:center; align-items:center;
    height:100vh;
    color:#111;
  }
  .phone{
    width:180px; /* üìè largeur r√©duite */
    background:#fff;
    border-radius:14px;
    box-shadow:0 4px 14px rgba(0,0,0,0.15);
    padding:10px;
  }
  .display{
    background:#f7f9fb;
    border-radius:10px;
    padding:8px;
    text-align:center;
    min-height:40px;
    position:relative;
    margin-bottom:8px;
  }
  .typed{font-size:16px;font-weight:700;letter-spacing:2px}
  .error-banner{display:none;color:#c92a2a;font-weight:700;margin-top:4px;font-size:12px}
  .keypad{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:6px;
    margin-top:6px;
  }
  .key{
    background:#fff;
    border-radius:8px;
    padding:8px 0;
    text-align:center;
    font-size:14px;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 2px 4px rgba(0,0,0,0.05);
  }
  .controls{
    display:flex;
    gap:4px;
    margin-top:8px;
  }
  .btn{
    flex:1;
    padding:6px;
    border-radius:8px;
    border:0;
    cursor:pointer;
    font-size:11px;
    font-weight:700;
  }
  .btn.call{background:#10b981;color:#fff}
  .btn.back{background:#f1f1f1}
  .btn.clear{background:#ef4444;color:#fff}
  /* overlay */
  .overlay{
    position:fixed; inset:0;
    display:none;
    justify-content:center; align-items:center;
    background:rgba(0,0,0,0.4);
  }
  .voicemail{
    background:#fff;
    border-radius:10px;
    padding:12px;
    width:180px;
    text-align:center;
  }
  .voicemail h3{margin:0 0 6px 0;font-size:14px}
  .voicemail p{margin:0 0 8px 0;font-size:12px;color:#555}
  .code-display{font-size:16px;font-weight:800;margin:6px 0}
  .pad{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:6px;
    justify-items:center;
  }
  .vm-key{
    width:38px;height:32px;
    background:#f2f4f8;
    border-radius:6px;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer;font-weight:700;font-size:14px;
  }
  .vm-actions{margin-top:8px;display:flex;gap:6px}
  .vm-actions button{
    flex:1;padding:6px;border-radius:6px;border:0;
    font-size:11px;font-weight:700;cursor:pointer
  }
  .ok{background:#007aff;color:#fff}
  .cancel{background:#ddd}
  .error{color:#c92a2a;font-size:12px;display:none;margin-top:6px}
  .success{color:#15803d;font-size:12px;display:none;margin-top:6px}
  #openLink{
    display:none;margin-top:8px;font-size:12px;
    color:#007aff;font-weight:bold;text-decoration:none;
  }
</style>
</head>
<body>
  <div class="phone">
    <div class="display">
      <div class="typed" id="typedNumber"></div>
      <div class="error-banner" id="numError">Num√©ro inconnu</div>
    </div>
    <div class="keypad" id="keypad">
      <div class="key" data-key="1">1</div>
      <div class="key" data-key="2">2</div>
      <div class="key" data-key="3">3</div>
      <div class="key" data-key="4">4</div>
      <div class="key" data-key="5">5</div>
      <div class="key" data-key="6">6</div>
      <div class="key" data-key="7">7</div>
      <div class="key" data-key="8">8</div>
      <div class="key" data-key="9">9</div>
      <div class="key" data-key="0">0</div>
    </div>
    <div class="controls">
      <button class="btn back" id="backBtn">‚Üê</button>
      <button class="btn call" id="callBtn">Appeler</button>
      <button class="btn clear" id="clearBtn">C</button>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="voicemail">
      <h3>R√©pondeur</h3>
      <p>Entrez le code secret</p>
      <div class="code-display" id="codeDisplay">‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
      <div class="pad" id="vmPad">
        <div class="vm-key" data-key="1">1</div>
        <div class="vm-key" data-key="2">2</div>
        <div class="vm-key" data-key="3">3</div>
        <div class="vm-key" data-key="4">4</div>
        <div class="vm-key" data-key="5">5</div>
        <div class="vm-key" data-key="6">6</div>
        <div class="vm-key" data-key="7">7</div>
        <div class="vm-key" data-key="8">8</div>
        <div class="vm-key" data-key="9">9</div>
        <div class="vm-key" data-key="0">0</div>
      </div>
      <div class="vm-actions">
        <!-- ‚úÖ type="button" pour √©viter le rechargement -->
        <button type="button" class="ok" id="vmOk">Valider</button>
        <button type="button" class="cancel" id="vmCancel">Raccrocher</button>
      </div>
      <div class="error" id="vmError">Code incorrect</div>
      <div class="success" id="vmSuccess">Acc√®s autoris√©</div>
      <a id="openLink" href="https://sites.google.com/" target="_blank">Acc√©der au dossier</a>
    </div>
  </div>

<script>
(function(){
  const TARGET_PHONE = '0755221314'; // num√©ro attendu
  const CORRECT = '1798';            // code secret

  const typedEl = document.getElementById('typedNumber');
  const keypad = document.getElementById('keypad');
  const backBtn = document.getElementById('backBtn');
  const clearBtn = document.getElementById('clearBtn');
  const callBtn = document.getElementById('callBtn');
  const overlay = document.getElementById('overlay');
  const codeDisplay = document.getElementById('codeDisplay');
  const vmPad = document.getElementById('vmPad');
  const vmOk = document.getElementById('vmOk');
  const vmCancel = document.getElementById('vmCancel');
  const vmError = document.getElementById('vmError');
  const vmSuccess = document.getElementById('vmSuccess');
  const openLink = document.getElementById('openLink');
  const numError = document.getElementById('numError');

  let typed = '';
  let vmCode = '';

  function renderTyped(){ typedEl.textContent = typed; }
  function updateCodeDisplay(){
    codeDisplay.textContent = vmCode.padEnd(4,'‚Ä¢').split('').map(c => c==='‚Ä¢'?'‚Ä¢':'‚óè').join(' ');
  }

  keypad.addEventListener('click', e=>{
    const k = e.target.closest('.key'); if(!k) return;
    typed += k.dataset.key; renderTyped();
  });

  backBtn.addEventListener('click', ()=>{ typed = typed.slice(0,-1); renderTyped(); });
  clearBtn.addEventListener('click', ()=>{ typed = ''; renderTyped(); });

  callBtn.addEventListener('click', ()=>{
    const normalized = typed.replace(/\D/g,'');
    const targetNorm = TARGET_PHONE.replace(/\D/g,'');
    if(normalized === targetNorm){
      vmCode = '';
      updateCodeDisplay();
      vmError.style.display = 'none';
      vmSuccess.style.display = 'none';
      openLink.style.display = 'none';
      overlay.style.display = 'flex';
    } else {
      numError.style.display = 'block';
      setTimeout(()=>numError.style.display='none',2000);
    }
  });

  vmPad.addEventListener('click', e=>{
    const k = e.target.closest('.vm-key'); if(!k) return;
    if(vmCode.length < 4){ vmCode += k.dataset.key; updateCodeDisplay(); }
  });

  vmOk.addEventListener('click', e=>{
    e.preventDefault(); // ‚úÖ emp√™che toute action par d√©faut
    if(vmCode === CORRECT){
      vmError.style.display = 'none';
      vmSuccess.style.display = 'block';
      openLink.style.display = 'block';
    } else {
      vmError.style.display = 'block';
      vmSuccess.style.display = 'none';
      openLink.style.display = 'none';
      vmCode = '';
      updateCodeDisplay();
    }
  });

  vmCancel.addEventListener('click', ()=> overlay.style.display='none');

  renderTyped();
  updateCodeDisplay();
})();
</script>
</body>
</html>
